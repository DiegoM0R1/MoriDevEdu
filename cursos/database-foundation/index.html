<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso: Fundamentos de Bases de Datos con Oracle - MoriDevEdu</title>
    <link rel="stylesheet" href="../../css/normalize.css">
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"></script>
    <style>
        /* Estilos adicionales para elementos interactivos y espec√≠ficos del curso */
        .course-layout { display: flex; gap: 2rem; margin-top: 2rem; }
        .course-navigation { flex: 0 0 280px; }
        .course-content-area { flex: 1; }
        .module-section:not(:last-child) { margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 1px solid #eee; }
        .module-section { padding-top: 70px; margin-top: -70px; }

        .intro-db-types { display: flex; justify-content: space-around; text-align: center; margin: 2rem 0; }
        .db-type-card { padding: 1rem; border: 1px solid #ddd; border-radius: 8px; width: 30%; box-shadow: var(--shadow); }
        .db-type-card i { font-size: 2.5rem; margin-bottom: 0.5rem; color: var(--primary-color); }
        
        .interactive-zone {
            border: 2px dashed var(--primary-color); padding: 1.5rem; margin: 1.5rem 0;
            border-radius: 8px; background-color: #f9f9f9;
        }
        .interactive-zone h5, .interactive-zone h4 {
            margin-top: 0; color: var(--primary-color);
            display: flex; align-items: center; gap: 0.5rem;
        }
        .clickable-concept { cursor: pointer; color: var(--secondary-color); text-decoration: underline; font-weight: bold; }
        .concept-explanation {
            background-color: white; padding: 10px; margin-top: 10px; border-left: 3px solid var(--accent-color);
            border-radius: 4px; display: none; /* Oculto por defecto */
        }
        .entity-diagram-placeholder, .data-modeler-placeholder, .sql-script-runner-placeholder {
            border: 1px dashed #aaa; padding: 2rem; text-align: center; background-color: #e9ecef;
            margin: 1rem 0; font-style: italic; color: #6c757d; min-height: 150px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .entity-box {
            border: 2px solid var(--secondary-color); background-color: white; padding: 10px; margin: 10px;
            border-radius: 5px; text-align: center; width: 150px;
        }
        .relationship-line {
            border-top: 2px dashed var(--accent-color); margin: 0 5px; flex-grow: 1;
            position: relative; top: -30px; /* Ajustar para alinear con el centro de las cajas */
        }
        .normalization-example table { width: 100%; margin-top: 0.5rem; }
        .normalization-example th, .normalization-example td { border: 1px solid #ccc; padding: 6px; text-align: left; }
        .bad-practice { background-color: #ffebee; }
        .good-practice { background-color: #e8f5e9; }

        /* Para el script runner simulado */
        #sqlOutputArea, #sqlTableVizArea {
            background-color: white; border: 1px solid #ccc; padding: 1rem; margin-top: 1rem;
            min-height: 100px; font-family: 'Consolas', monospace; white-space: pre-wrap;
        }
        #sqlTableVizArea table { width: auto; } /* No llenar todo el ancho */
    </style>
</head>
<body>
    <nav>
        <div class="container nav-container">
            <a href="../../index.html" class="logo"><i class="fas fa-graduation-cap"></i> MoriDevEdu</a>
            <ul class="nav-links">
                <li><a href="../../index.html">Inicio</a></li>
                <li><a href="../../index.html#cursos">Cursos</a></li>
                <li><a href="../../index.html#about">Sobre Nosotros</a></li>
                <li><a href="../../index.html#contact">Contacto</a></li>
            </ul>
            <div class="mobile-menu"><i class="fas fa-bars"></i></div>
        </div>
    </nav>

    <div class="course-hero">
        <div class="container course-header">
            <h1 class="course-title" style="color:white;">Fundamentos de Bases de Datos con Oracle</h1>
            <p class="course-description" style="color:white;">
                Descubre el poder detr√°s de la informaci√≥n. Aprende a dise√±ar, modelar y gestionar bases de datos relacionales utilizando Oracle, una de las tecnolog√≠as l√≠deres en el mundo empresarial. Desde el concepto hasta la creaci√≥n de scripts SQL.
            </p>
            <div class="course-meta">
                <span class="course-meta-item"><i class="fas fa-layer-group"></i> Nivel: Fundamentos</span>
                <span class="course-meta-item"><i class="fas fa-clock"></i> Duraci√≥n Estimada: 50 horas</span>
                <span class="course-meta-item"><i class="fas fa-database"></i> Enfoque: Modelado de Datos, SQL, Oracle</span>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="breadcrumb">
            <ul>
                <li><a href="../../index.html">Inicio</a></li>
                <li><a href="../../index.html#cursos">Cursos</a></li>
                <li><a href="#">Fundamentos de Bases de Datos (Oracle)</a></li>
            </ul>
        </div>

        <div class="course-layout">
            <aside class="course-navigation">
                <h3 class="course-nav-title"><i class="fas fa-stream"></i> M√≥dulos del Curso</h3>
                <ul class="course-nav-list">
                    <li class="course-nav-item"><a href="#modulo0" class="course-nav-link active"><i class="fas fa-info-circle"></i> Introducci√≥n a las BD</a></li>
                    <li class="course-nav-item"><a href="#modulo13" class="course-nav-link"><i class="fas fa-drafting-compass"></i> M√≥dulo 1: Modelado Conceptual</a></li>
                    <li class="course-nav-item"><a href="#modulo14" class="course-nav-link"><i class="fas fa-cogs"></i> M√≥dulo 2: Modelo F√≠sico y SQL</a></li>
                    <li class="course-nav-item"><a href="#modulo15" class="course-nav-link"><i class="fas fa-tools"></i> M√≥dulo 3: Data Modeler</a></li>
                    <li class="course-nav-item"><a href="#modulo16" class="course-nav-link"><i class="fas fa-scroll"></i> M√≥dulo 4: Scripts SQL</a></li>
                </ul>
                <div style="padding: 1rem; margin-top:1rem; background-color: #f9f9f9; border-radius: 8px;">
                    <h4><i class="fas fa-download"></i> Herramientas Clave</h4>
                    <ul style="list-style: none; padding-left: 0.5rem;">
                        <li style="margin-bottom: 0.5rem;"><a href="https://www.oracle.com/database/technologies/xe-downloads.html" target="_blank" class="btn btn-outline btn-sm" style="width:100%; text-align:left;"><i class="fas fa-database"></i> Oracle DB XE (Gratuita)</a></li>
                        <li style="margin-bottom: 0.5rem;"><a href="https://www.oracle.com/database/sqldeveloper/technologies/sql-developer-data-modeler/" target="_blank" class="btn btn-outline btn-sm" style="width:100%; text-align:left;"><i class="fas fa-project-diagram"></i> SQL Developer Data Modeler</a></li>
                    </ul>
                </div>
            </aside>

            <main class="course-content-area">
                <section id="modulo0" class="module-section" style="padding-top:0; margin-top:0;">
                    <h2 class="lesson-title"><i class="fas fa-info-circle"></i> Introducci√≥n: El Universo de las Bases de Datos</h2>
                    <p>Imagina una gigantesca biblioteca digital, perfectamente organizada, donde cada pieza de informaci√≥n tiene su lugar y puede ser encontrada en segundos. ¬°Eso es, en esencia, una base de datos! Son sistemas cruciales dise√±ados para <strong>almacenar, organizar, proteger y permitir el acceso eficiente a la informaci√≥n</strong>. Hoy en d√≠a, casi todas las aplicaciones que usas, desde tu red social favorita hasta el sistema de tu banco, dependen vitalmente de ellas.</p>
                    <div class="alert alert-info">
                        <i class="fas fa-lightbulb"></i> <strong>Analog√≠a:</strong> Piensa en una base de datos como una biblioteca, los datos son los libros, el esquema de la base de datos es el cat√°logo, y el Sistema Gestor de Base de Datos (DBMS) es el bibliotecario experto que te ayuda a encontrar y gestionar todo.
                    </div>
                    <p><strong>Oracle Database</strong> es uno de los "bibliotecarios" m√°s robustos y utilizados a nivel mundial, especialmente en entornos empresariales que demandan alta performance, seguridad y escalabilidad.</p>
                    
                    <h3>Un Vistazo a los Tipos de Bases de Datos:</h3>
                    <p>No todas las "bibliotecas" son iguales. Existen diferentes enfoques para organizar la informaci√≥n:</p>
                    <div class="intro-db-types">
                        <div class="db-type-card">
                            <i class="fas fa-table"></i>
                            <h4>Relacionales (SQL)</h4>
                            <p>Organizan los datos en tablas estructuradas (filas y columnas) con relaciones bien definidas entre ellas. Usan SQL (Lenguaje de Consulta Estructurado). <br><em>Ej: Oracle DB, MySQL, PostgreSQL.</em></p>
                        </div>
                        <div class="db-type-card">
                            <i class="fas fa-file-alt"></i>
                            <h4>NoSQL</h4>
                            <p>Ofrecen modelos de datos m√°s flexibles (documentos, clave-valor, grafos) para datos no estructurados o semi-estructurados. Gran escalabilidad. <br><em>Ej: MongoDB, Cassandra, Redis.</em></p>
                        </div>
                        <div class="db-type-card">
                            <i class="fas fa-cloud"></i>
                            <h4>En la Nube (Cloud Databases)</h4>
                            <p>Alojadas y gestionadas por proveedores de nube. Accesibles desde cualquier lugar y ofrecen escalabilidad bajo demanda. Pueden ser SQL o NoSQL. <br><em>Ej: Amazon RDS, Azure SQL Database, Google Cloud SQL.</em></p>
                        </div>
                    </div>
                    <p>En este curso, <strong>nos enfocaremos en el mundo de las bases de datos relacionales (SQL)</strong>, utilizando el poder de Oracle para modelar, construir y gestionar la informaci√≥n.</p>
                </section>

                <section id="modulo13" class="module-section">
                    <h2 class="lesson-title"><i class="fas fa-drafting-compass"></i> M√≥dulo 1: Modelado Conceptual de Bases de Datos</h2>
                    <p>Antes de construir cualquier cosa, ¬°necesitamos un plano! El modelado de bases de datos es como dise√±ar el plano arquitect√≥nico de nuestra "biblioteca de datos". Un buen modelo asegura que la informaci√≥n est√© organizada l√≥gicamente, sea f√°cil de acceder y se eviten problemas futuros como datos duplicados o inconsistentes.</p>

                    <h3>üîπ ¬øPor qu√© modelar? La Importancia de un Buen Dise√±o</h3>
                    <p>Imagina intentar construir una casa sin planos: ¬°ser√≠a un caos! Un modelo de datos bien pensado:</p>
                    <ul>
                        <li>Asegura la <strong>integridad y consistencia</strong> de los datos.</li>
                        <li>Facilita la <strong>comprensi√≥n</strong> de la estructura de la informaci√≥n.</li>
                        <li>Reduce la <strong>redundancia</strong> de datos (ahorrando espacio y evitando errores).</li>
                        <li>Optimiza el <strong>rendimiento</strong> de las consultas.</li>
                        <li>Sirve como <strong>documentaci√≥n</strong> para desarrolladores y usuarios.</li>
                    </ul>

                    <h3>Pasos para Modelar tu Universo de Datos:</h3>
                    <p>Modelar una base de datos es un proceso que parte de entender una necesidad del mundo real. Tomemos como ejemplo un sistema para una <strong>peque√±a tienda online</strong>.</p>
                    
                    <div class="interactive-zone">
                        <h4><i class="fas fa-list-check"></i> Paso 1: Definir los Requisitos üìù</h4>
                        <p>¬øQu√© informaci√≥n es crucial para nuestra tienda online? <span class="clickable-concept" onclick="toggleExplanation('req-expl')">Haz clic para reflexionar.</span></p>
                        <div id="req-expl" class="concept-explanation">
                            Necesitaremos guardar informaci√≥n sobre:
                            <ul>
                                <li>Nuestros <strong>Productos</strong> (nombre, descripci√≥n, precio, stock).</li>
                                <li>Nuestros <strong>Clientes</strong> (nombre, email, direcci√≥n de env√≠o).</li>
                                <li>Las <strong>Ventas</strong> que realizamos (qu√© cliente compr√≥ qu√© producto, cu√°ndo, cantidad).</li>
                            </ul>
                            Estos son los pilares de nuestra base de datos.
                        </div>
                    </div>

                    <div class="interactive-zone">
                        <h4><i class="fas fa-cubes"></i> Paso 2: Identificar Entidades y Atributos üèóÔ∏è</h4>
                        <p>Las <strong>Entidades</strong> son los "sustantivos" principales de nuestro sistema (objetos o conceptos sobre los que guardamos informaci√≥n). Los <strong>Atributos</strong> son las caracter√≠sticas o propiedades de esas entidades.</p>
                        <p>Para nuestra tienda, las entidades clave y algunos de sus atributos ser√≠an:</p>
                        <div style="display:flex; justify-content:space-around; text-align:center; flex-wrap:wrap;">
                            <div class="entity-box"><strong>Cliente</strong><hr>ID_Cliente (PK) <br>Nombre<br>Apellido<br>Email<br>Direcci√≥n</div>
                            <div class="entity-box"><strong>Producto</strong><hr>ID_Producto (PK)<br>NombreProd<br>Descripci√≥n<br>PrecioUnit<br>StockDisp</div>
                            <div class="entity-box"><strong>Venta</strong><hr>ID_Venta (PK)<br>FechaVenta<br>MontoTotal<br><em>ID_Cliente (FK)</em><br></div>
                        </div>
                        <p class="alert alert-info" style="margin-top:1rem;"><i class="fas fa-key"></i> <strong>(PK)</strong> indica Clave Primaria: un identificador √∫nico para cada registro en la entidad. <strong>(FK)</strong> indica Clave For√°nea: un campo que enlaza con la Clave Primaria de otra entidad.</p>
                        
                        <h5><i class="fas fa-mouse-pointer"></i> Mini-Juego: Identifica Entidades y Atributos</h5>
                        <p>Escenario: Una <strong>Biblioteca</strong>. Arrastra (mentalmente) los siguientes √≠tems a "Entidades" o "Atributos": <em>Libro, T√≠tulo, Autor, ISBN, Socio, NombreSocio, Pr√©stamo, FechaPr√©stamo.</em></p>
                        <div class="entity-diagram-placeholder">
                            <p>[Simulaci√≥n de Arrastrar y Soltar: "Libro", "Socio", "Pr√©stamo" ser√≠an Entidades. El resto, Atributos de estas.]</p>
                        </div>
                    </div>

                    <div class="interactive-zone">
                        <h4><i class="fas fa-link"></i> Paso 3: Establecer Relaciones entre Entidades üîó</h4>
                        <p>¬øC√≥mo se conectan nuestras entidades? Usamos relaciones:</p>
                        <ul>
                            <li><strong>Un Cliente puede realizar muchas Ventas (1:N).</strong> Una Venta pertenece a un solo Cliente.</li>
                            <li><strong>Una Venta puede incluir muchos Productos, y un Producto puede estar en muchas Ventas (M:N).</strong> Esta relaci√≥n M:N se resuelve con una tabla intermedia llamada, por ejemplo, <code>Detalle_Venta</code>.</li>
                        </ul>
                        <p><code>Detalle_Venta</code> contendr√≠a: <em>ID_Detalle (PK), ID_Venta (FK), ID_Producto (FK), Cantidad, PrecioVentaUnidad.</em></p>
                        <div style="display:flex; justify-content:center; align-items:center; margin-top:1rem;">
                            <div class="entity-box">Cliente</div>
                            <div class="relationship-line">1..*</div>
                            <div class="entity-box">Venta</div>
                            <div class="relationship-line">1..*</div>
                            <div class="entity-box">Detalle_Venta</div>
                            <div class="relationship-line">*..1</div>
                             <div class="entity-box">Producto</div>
                        </div>
                        <p style="text-align:center; font-size:0.9em;">(Diagrama simplificado. Las l√≠neas representan relaciones, los s√≠mbolos indican cardinalidad: 1..* significa "uno a muchos")</p>
                        <h5><i class="fas fa-project-diagram"></i> Visualizador de Relaciones (Conceptual)</h5>
                        <p>Elige dos entidades y el tipo de relaci√≥n. <span class="clickable-concept" onclick="toggleExplanation('rel-expl')">Haz clic para ver ejemplos comunes.</span></p>
                         <div id="rel-expl" class="concept-explanation">
                            <ul>
                                <li><strong>Profesor - Curso (M:N):</strong> Un profesor imparte muchos cursos, un curso puede ser impartido por muchos profesores (si hay co-docencia o diferentes secciones). Se resuelve con una tabla `Imparte(ID_Profesor_FK, ID_Curso_FK)`.</li>
                                <li><strong>Pa√≠s - Ciudad (1:N):</strong> Un pa√≠s tiene muchas ciudades, una ciudad pertenece a un solo pa√≠s.</li>
                                <li><strong>Usuario - PerfilUsuario (1:1):</strong> Un usuario tiene un solo perfil, un perfil pertenece a un solo usuario.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="interactive-zone">
                        <h4><i class="fas fa-ruler-combined"></i> Paso 4: Crear el Esquema L√≥gico (Diagrama Entidad-Relaci√≥n - DER) üìê</h4>
                        <p>El DER es la representaci√≥n gr√°fica de nuestro modelo. Muestra entidades, atributos y relaciones. Herramientas como Oracle SQL Developer Data Modeler nos ayudan a crearlos.</p>
                        <div class="entity-diagram-placeholder">
                            <i class="fas fa-image fa-3x" style="color:#bdc3c7;"></i>
                            <p>[Aqu√≠ ir√≠a una imagen de un DER simple para la Tienda, mostrando las tablas Cliente, Producto, Venta y Detalle_Venta con sus atributos PK y FK, y las l√≠neas de relaci√≥n con cardinalidad (patas de gallo).]</p>
                            <p><em>Al pasar el mouse sobre una PK o FK, se podr√≠a mostrar una tooltip explicando su funci√≥n (simulado).</em></p>
                        </div>
                    </div>
                    
                    <h3>üîπ Concepto Clave: Normalizaci√≥n üìä - ¬°Organizando para la Eficiencia!</h3>
                    <p>La normalizaci√≥n es un proceso para refinar la estructura de nuestras tablas, eliminando la redundancia de datos y mejorando su integridad. Imagina que tienes la direcci√≥n de un cliente repetida en cada una de sus 100 ventas; si el cliente se muda, ¬°tendr√≠as que actualizarla en 100 sitios! La normalizaci√≥n evita esto.</p>
                    <p>Se organiza en "Formas Normales" (1NF, 2NF, 3NF son las m√°s comunes):</p>
                    <div class="normalization-example">
                        <p><strong>No Normalizado (Ejemplo Malo):</strong> Tabla `PedidoCompleto`</p>
                        <table>
                            <tr class="bad-practice"><th>ID_Pedido</th><th>Cliente</th><th>Productos (Nombre, Cantidad)</th><th>Direcci√≥nCliente</th></tr>
                            <tr><td>101</td><td>Ana Solis</td><td>Laptop(1), Mouse(1)</td><td>Calle Falsa 123</td></tr>
                             <tr><td>102</td><td>Luis Cruz</td><td>Teclado(2)</td><td>Av. Siempre Viva 742</td></tr>
                        </table>
                        <p>Problemas: "Productos" es una lista (viola 1NF), "Direcci√≥nCliente" se repetir√≠a para cada pedido de Ana.</p>
                    </div>

                    <ul>
                        <li><strong>1NF (Primera Forma Normal): Atomicidad.</strong> <span class="clickable-concept" onclick="toggleExplanation('nf1-expl')">¬øQu√© significa?</span>
                            <div id="nf1-expl" class="concept-explanation">Cada celda de la tabla debe contener un √∫nico valor (at√≥mico). No listas ni grupos de valores. <br><em>Soluci√≥n para `PedidoCompleto`:</em> Separar los productos en una tabla `Detalle_Pedido`.</div>
                        </li>
                        <li><strong>2NF (Segunda Forma Normal): Dependencia completa de la PK (Clave Primaria).</strong> <span class="clickable-concept" onclick="toggleExplanation('nf2-expl')">¬øQu√© significa?</span>
                            <div id="nf2-expl" class="concept-explanation">Se aplica si tienes una clave primaria compuesta (m√∫ltiples columnas). Todos los atributos que no son clave deben depender de *toda* la clave primaria compuesta, no solo de una parte. <br><em>Ejemplo:</em> Si `Detalle_Pedido` tuviera `(ID_Pedido, ID_Producto)` como PK y un atributo `Nombre_Producto`, este √∫ltimo solo depende de `ID_Producto`, violando 2NF. Se saca `Nombre_Producto` a la tabla `Producto`.</div>
                        </li>
                        <li><strong>3NF (Tercera Forma Normal): Sin dependencias transitivas.</strong> <span class="clickable-concept" onclick="toggleExplanation('nf3-expl')">¬øQu√© significa?</span>
                            <div id="nf3-expl" class="concept-explanation">Ning√∫n atributo que no sea clave debe depender de otro atributo que tampoco sea clave. <br><em>Ejemplo:</em> Si en la tabla `Empleado` tienes `ID_Empleado (PK), Nombre_Empleado, ID_Departamento, Nombre_Departamento`. Aqu√≠, `Nombre_Departamento` depende de `ID_Departamento` (que no es la PK de `Empleado`). Esto es una dependencia transitiva. <br><em>Soluci√≥n:</em> Crear una tabla `Departamento(ID_Departamento PK, Nombre_Departamento)`. En `Empleado` quedar√≠a `ID_Departamento` como FK.</div>
                        </li>
                    </ul>
                    <p>La normalizaci√≥n puede parecer compleja, pero resulta en bases de datos m√°s limpias, eficientes y f√°ciles de mantener.</p>
                    <div class="interactive-zone">
                        <h5><i class="fas fa-check-double"></i> Mini-Quiz de Normalizaci√≥n</h5>
                        <p>Tabla: <code>Libro(ISBN (PK), Titulo, ID_Autor, Nombre_Autor, Editorial)</code><br>
                        ¬øQu√© Forma Normal (probablemente) viola esta tabla si <code>Nombre_Autor</code> depende de <code>ID_Autor</code>, y <code>ID_Autor</code> no es parte de la PK de <code>Libro</code>?</p>
                        <p><span class="clickable-concept" onclick="this.nextElementSibling.style.display='block';">Ver Respuesta</span> <span class="concept-explanation" style="display:inline-block; padding:5px;">Probablemente viola la 3NF (dependencia transitiva: Titulo -> ID_Autor -> Nombre_Autor). Deber√≠amos tener una tabla Autor(ID_Autor, Nombre_Autor).</span></p>
                    </div>
                </section>

                <section id="modulo14" class="module-section">
                    <h2 class="lesson-title"><i class="fas fa-cogs"></i> M√≥dulo 2: Creando el Modelo F√≠sico en Oracle (SQL)</h2>
                    <p>Una vez que tenemos nuestro "plano" conceptual (modelo l√≥gico y DER), es hora de traducirlo a la realidad de c√≥mo se almacenar√°n los datos en Oracle. Esto es el <strong>Modelo F√≠sico</strong>. Aqu√≠ entran en juego los tipos de datos espec√≠ficos de Oracle, las restricciones y las optimizaciones.</p>

                    <h3>Del L√≥gico al F√≠sico: Materializando el Dise√±o</h3>
                    <p>El modelo f√≠sico detalla:</p>
                    <ul>
                        <li>Nombres exactos de <strong>tablas y columnas</strong>.</li>
                        <li><strong>Tipos de datos Oracle</strong> para cada columna (<code>NUMBER</code>, <code>VARCHAR2</code>, <code>DATE</code>, etc.).</li>
                        <li><strong>Restricciones (Constraints)</strong> para asegurar la integridad de los datos (<code>PRIMARY KEY</code>, <code>FOREIGN KEY</code>, <code>UNIQUE</code>, <code>NOT NULL</code>, <code>CHECK</code>).</li>
                        <li><strong>√çndices</strong> para acelerar las b√∫squedas.</li>
                        <li>Otras estructuras espec√≠ficas del DBMS como <strong>tablespaces</strong> o <strong>particiones</strong> (conceptos m√°s avanzados que mencionaremos).</li>
                    </ul>
                    <div class="entity-diagram-placeholder">
                        <i class="fas fa-exchange-alt fa-3x" style="color:#bdc3c7;"></i>
                        <p>[Diagrama conceptual: Modelo L√≥gico (cajas y l√≠neas simples) -> Flecha de Transformaci√≥n -> Modelo F√≠sico (cajas con tipos de datos Oracle, PK/FK marcados, √≠ndices mostrados).]</p>
                    </div>

                    <h4>Tipos de Datos Comunes en Oracle SQL:</h4>
                    <div class="interactive-zone">
                        <h5><i class="fas fa-ruler-vertical"></i> Selector de Tipo de Dato Oracle (Conceptual)</h5>
                        <p>Para cada tipo de informaci√≥n, Oracle ofrece un tipo de dato adecuado. ¬°Elegir bien es clave!</p>
                        <ul>
                            <li><strong><code>NUMBER(p, s)</code></strong>: Para n√∫meros. <code>p</code> es la precisi√≥n (total de d√≠gitos), <code>s</code> es la escala (d√≠gitos despu√©s del punto decimal).
                                <ul class="concept-explanation" style="display:block; border:none; padding-left:10px;">
                                    <li><code>NUMBER(5)</code>: Entero hasta 99999.</li>
                                    <li><code>NUMBER(7,2)</code>: N√∫mero como 12345.67.</li>
                                    <li><code>NUMBER</code> (sin p,s): N√∫mero de punto flotante de alta precisi√≥n.</li>
                                </ul>
                            </li>
                            <li><strong><code>VARCHAR2(size [BYTE | CHAR])</code></strong>: Cadenas de texto de longitud variable. <code>size</code> es la longitud m√°xima. <code>BYTE</code> (defecto) o <code>CHAR</code> (para caracteres multibyte). ¬°El tipo de dato m√°s com√∫n para texto!</li>
                            <li><strong><code>CHAR(size [BYTE | CHAR])</code></strong>: Cadenas de texto de longitud fija. Si el texto es m√°s corto, se rellena con espacios. Usar con cuidado.</li>
                            <li><strong><code>DATE</code></strong>: Almacena fecha y hora (siglo, a√±o, mes, d√≠a, hora, minuto, segundo).</li>
                            <li><strong><code>TIMESTAMP</code></strong>: Similar a <code>DATE</code> pero con fracciones de segundo y opcionalmente zona horaria.</li>
                            <li><strong><code>CLOB</code> (Character Large Object)</strong>: Para textos muy largos (documentos, descripciones extensas).</li>
                            <li><strong><code>BLOB</code> (Binary Large Object)</strong>: Para datos binarios grandes (im√°genes, videos, archivos).</li>
                        </ul>
                        <p><em>Intenta asociar: ¬øQu√© tipo usar√≠as para... un DNI? ¬øEl precio de un producto? ¬øLa descripci√≥n de un libro?</em></p>
                    </div>

                    <h4>Definiendo Tablas con <code>CREATE TABLE</code> y Restricciones:</h4>
                    <p>El comando SQL principal para crear la estructura es <code>CREATE TABLE</code>.</p>
                    <pre><code class="language-sql">
CREATE TABLE Cliente (
    ID_Cliente      NUMBER(10)      CONSTRAINT pk_cliente PRIMARY KEY,
    Nombre          VARCHAR2(50)    CONSTRAINT nn_cliente_nombre NOT NULL,
    Apellido        VARCHAR2(50)    CONSTRAINT nn_cliente_apellido NOT NULL,
    Email           VARCHAR2(100)   CONSTRAINT uq_cliente_email UNIQUE,
    Telefono        VARCHAR2(20),
    FechaRegistro   DATE            DEFAULT SYSDATE, -- Valor por defecto: fecha actual
    PuntosFidelidad NUMBER(5)       CONSTRAINT ck_cliente_puntos CHECK (PuntosFidelidad >= 0)
);

CREATE TABLE Producto (
    ID_Producto     NUMBER(10)      CONSTRAINT pk_producto PRIMARY KEY,
    NombreProd      VARCHAR2(100)   CONSTRAINT nn_prod_nombre NOT NULL,
    Descripcion     CLOB,
    PrecioUnit      NUMBER(10,2)    CONSTRAINT nn_prod_precio NOT NULL 
                                    CONSTRAINT ck_prod_precio CHECK (PrecioUnit > 0),
    StockDisp       NUMBER(6)       DEFAULT 0 
                                    CONSTRAINT ck_prod_stock CHECK (StockDisp >= 0)
);

CREATE TABLE Venta (
    ID_Venta        NUMBER(12)      CONSTRAINT pk_venta PRIMARY KEY,
    ID_Cliente_FK   NUMBER(10)      CONSTRAINT nn_venta_cliente NOT NULL,
    FechaVenta      TIMESTAMP       DEFAULT CURRENT_TIMESTAMP,
    MontoTotal      NUMBER(12,2)    CONSTRAINT ck_venta_monto CHECK (MontoTotal >= 0),
    -- Definiendo la Clave For√°nea (FK)
    CONSTRAINT fk_venta_cliente FOREIGN KEY (ID_Cliente_FK)
        REFERENCES Cliente(ID_Cliente)
        -- ON DELETE SET NULL -- Opcional: qu√© hacer si se borra el cliente
        -- ON DELETE CASCADE -- Opcional: borrar ventas si se borra el cliente
);
-- Nota: La tabla Detalle_Venta para la relaci√≥n M:N se crear√≠a de forma similar.
                    </code></pre>
                    <p><strong>Explicaci√≥n de las Restricciones (Constraints):</strong></p>
                    <ul>
                        <li><code>CONSTRAINT nombre_constraint TIPO_CONSTRAINT (columnas)</code>: Forma expl√≠cita de nombrar una restricci√≥n. Facilita su gesti√≥n.</li>
                        <li><code>PRIMARY KEY</code>: Identificador √∫nico de la fila. Impl√≠citamente <code>NOT NULL</code> y <code>UNIQUE</code>.</li>
                        <li><code>NOT NULL</code>: La columna no puede tener valores nulos.</li>
                        <li><code>UNIQUE</code>: Todos los valores en la columna (o combinaci√≥n de columnas) deben ser √∫nicos. Permite un valor nulo.</li>
                        <li><code>CHECK</code>: Asegura que los valores cumplan una condici√≥n l√≥gica.</li>
                        <li><code>FOREIGN KEY ... REFERENCES ...</code>: Establece una relaci√≥n con otra tabla, asegurando la integridad referencial.</li>
                        <li><code>DEFAULT</code>: Asigna un valor por defecto si no se especifica uno al insertar.</li>
                    </ul>
                    <div class="interactive-zone">
                        <h5><i class="fas fa-tools"></i> Constructor de <code>CREATE TABLE</code> (Simplificado)</h5>
                        <p>Elige un nombre de tabla, a√±ade columnas con tipos y restricciones, ¬°y mira c√≥mo se forma el SQL!</p>
                        <div class="entity-diagram-placeholder">
                            <p>[Simulaci√≥n: Inputs para NombreTabla, NombreCol1, TipoCol1, RestriccionesCol1 (checkboxes para PK, NN, UQ). Al a√±adir columnas, se actualiza un `<pre>` con el `CREATE TABLE` SQL.]</p>
                        </div>
                    </div>

                    <h4>Acelerando Consultas con √çndices:</h4>
                    <p>Un √≠ndice es como el √≠ndice de un libro: permite a Oracle encontrar datos m√°s r√°pidamente sin tener que leer toda la tabla (Full Table Scan).</p>
                    <pre><code class="language-sql">
-- Crear un √≠ndice en la columna Email de la tabla Cliente para b√∫squedas r√°pidas por email
CREATE INDEX idx_cliente_email ON Cliente(Email);

-- Crear un √≠ndice compuesto si a menudo buscas por Apellido y Nombre juntos
CREATE INDEX idx_cliente_apellinom ON Cliente(Apellido, Nombre);
                    </code></pre>
                    <ul>
                        <li><strong>Cu√°ndo crear √≠ndices:</strong> En columnas usadas frecuentemente en cl√°usulas <code>WHERE</code>, <code>JOIN</code>, o para <code>ORDER BY</code>. En Claves For√°neas es buena pr√°ctica.</li>
                        <li><strong>Impacto:</strong> Aceleran las lecturas (<code>SELECT</code>), pero pueden ralentizar un poco las escrituras (<code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>) porque el √≠ndice tambi√©n debe actualizarse. ¬°No abuses de ellos!</li>
                    </ul>
                    <div class="interactive-zone">
                        <h5><i class="fas fa-tachometer-alt"></i> Sin √çndice vs. Con √çndice (Visualizaci√≥n Conceptual)</h5>
                        <p>Imagina buscar un nombre en una gu√≠a telef√≥nica enorme...</p>
                        <div style="display:flex; justify-content:space-around;">
                            <div style="width:45%; text-align:center;"><strong>Sin √çndice (Lento)</strong><br><i class="fas fa-search fa-2x" style="animation: scan 2s linear infinite;"></i><br>Revisando cada p√°gina...</div>
                            <div style="width:45%; text-align:center;"><strong>Con √çndice (R√°pido)</strong><br><i class="fas fa-book-open fa-2x"></i><br>¬°Directo a la letra 'P'!</div>
                        </div>
                        <style>@keyframes scan { 0%{transform:translateX(-10px)} 50%{transform:translateX(10px)} 100%{transform:translateX(-10px)}}</style>
                    </div>
                </section>

                <section id="modulo15" class="module-section">
                    <h2 class="lesson-title"><i class="fas fa-tools"></i> M√≥dulo 3: Modelado Visual con Oracle SQL Developer Data Modeler</h2>
                    <p>Dise√±ar bases de datos complejas directamente con c√≥digo SQL puede ser propenso a errores y dif√≠cil de visualizar. Aqu√≠ es donde brillan herramientas como <strong>Oracle SQL Developer Data Modeler (SDDM)</strong>. Es una herramienta gr√°fica, gratuita, que te permite dise√±ar, documentar y generar los esquemas de tu base de datos de forma visual e intuitiva.</p>

                    <h3>¬øQu√© puedes hacer con SQL Developer Data Modeler?</h3>
                    <ul>
                        <li><strong>Dise√±ar Modelos L√≥gicos:</strong> Representar entidades, atributos y relaciones sin preocuparte a√∫n por los detalles espec√≠ficos de Oracle.</li>
                        <li><strong>Ingenier√≠a a Modelo Relacional/F√≠sico:</strong> Convertir tu modelo l√≥gico en un modelo f√≠sico espec√≠fico para Oracle (u otros DBMS), asignando tipos de datos, definiendo tablas, etc.</li>
                        <li><strong>Generar DDL:</strong> Crear autom√°ticamente los scripts SQL (<code>CREATE TABLE</code>, <code>ALTER TABLE</code>, etc.) para implementar tu dise√±o en la base de datos.</li>
                        <li><strong>Ingenier√≠a Inversa:</strong> Crear un modelo visual a partir de una base de datos existente o un script DDL. ¬°Muy √∫til para documentar sistemas legados!</li>
                        <li><strong>Comparar y Sincronizar Modelos:</strong> Comparar diferentes versiones de tu modelo o tu modelo con una base de datos real.</li>
                        <li><strong>Documentar:</strong> Generar informes y documentaci√≥n sobre tu modelo.</li>
                    </ul>

                    <h3>Flujo de Trabajo B√°sico en Data Modeler:</h3>
                    <div class="interactive-zone">
                        <h4><i class="fas fa-shoe-prints"></i> Pasos Visuales (Simulados)</h4>
                        <ol>
                            <li><strong>Crear un Nuevo Dise√±o L√≥gico:</strong> <span class="clickable-concept" onclick="toggleExplanation('sddm-logico')">Ver m√°s...</span>
                                <div id="sddm-logico" class="concept-explanation">
                                    En SDDM, ir√≠as a `Archivo > Nuevo > Dise√±o L√≥gico`. Aqu√≠ arrastras y sueltas "Entidades" desde la paleta, les das nombres (ej: Cliente, Producto) y a√±ades "Atributos" (ej: Nombre, Precio) con sus tipos de datos l√≥gicos (ej: Cadena, N√∫mero).
                                    <div class="data-modeler-placeholder"><i class="fas fa-object-group fa-2x"></i><p>Panel de Dise√±o L√≥gico: Arrastrando Entidades (Cliente, Producto) y a√±adiendo Atributos.</p></div>
                                </div>
                            </li>
                            <li><strong>Definir Relaciones:</strong> <span class="clickable-concept" onclick="toggleExplanation('sddm-rel')">Ver m√°s...</span>
                                <div id="sddm-rel" class="concept-explanation">
                                    Usas herramientas para dibujar l√≠neas de relaci√≥n entre entidades (ej: de Cliente a Venta). Especificas la cardinalidad (1:N, M:N). Para M:N, SDDM puede ayudarte a crear la tabla de intersecci√≥n.
                                    <div class="data-modeler-placeholder"><i class="fas fa-link fa-2x"></i><p>Dibujando una Relaci√≥n 1:N entre Cliente y Venta, y una M:N entre Venta y Producto (que crear√° Detalle_Venta).</p></div>
                                </div>
                            </li>
                            <li><strong>Ingenier√≠a a Modelo Relacional (F√≠sico):</strong> <span class="clickable-concept" onclick="toggleExplanation('sddm-fisico')">Ver m√°s...</span>
                                <div id="sddm-fisico" class="concept-explanation">
                                    Seleccionas tu modelo l√≥gico y usas la opci√≥n "Ingenier√≠a a Modelo Relacional". Eliges "Oracle [versi√≥n]". SDDM convierte tus entidades en tablas, atributos en columnas con tipos de datos Oracle, y relaciones en claves for√°neas.
                                    <div class="data-modeler-placeholder"><i class="fas fa-cogs fa-2x"></i><p>Vista del Modelo F√≠sico: Las entidades ahora son tablas con tipos de datos Oracle (VARCHAR2, NUMBER). Las FKs son visibles.</p></div>
                                </div>
                            </li>
                            <li><strong>Generar DDL (Script SQL):</strong> <span class="clickable-concept" onclick="toggleExplanation('sddm-ddl')">Ver m√°s...</span>
                                <div id="sddm-ddl" class="concept-explanation">
                                    Con el modelo f√≠sico seleccionado, vas a `Archivo > Exportar > Archivo DDL`. Configuras las opciones (qu√© objetos generar, para qu√© versi√≥n de Oracle) y SDDM crea el script SQL con todos los `CREATE TABLE`, `ALTER TABLE ADD CONSTRAINT`, etc.
                                    <div class="data-modeler-placeholder"><i class="fas fa-file-code fa-2x"></i><p>Ventana de Generaci√≥n de DDL: Previsualizaci√≥n del script SQL listo para ser ejecutado en la base de datos.</p></div>
                                </div>
                            </li>
                        </ol>
                    </div>
                    
                    <h4>Ejemplo de Representaci√≥n Gr√°fica en Data Modeler:</h4>
                    <p>Imagina el siguiente diagrama simplificado que podr√≠as ver en SDDM para nuestra tienda (como mencionaste: üìå Clientes ‚Üí üìå Productos ‚Üí üìå Ventas):</p>
                    <div class="data-modeler-placeholder" style="background-image: url('../../img/placeholder_sddm_diagram.png'); background-size:contain; background-repeat:no-repeat; background-position: center; min-height:300px; color:transparent;">
                        <p style="background:rgba(255,255,255,0.7); padding:5px; color:black;">
                            <strong>[Diagrama Visual de SQL Developer Data Modeler]</strong><br>
                            - Entidad <strong>Cliente</strong> (Caja con atributos: ID_Cliente (PK), Nombre, Email (UQ))<br>
                            - Entidad <strong>Producto</strong> (Caja con atributos: ID_Producto (PK), NombreProd, PrecioUnit)<br>
                            - Entidad <strong>Venta</strong> (Caja con atributos: ID_Venta (PK), ID_Cliente_FK (FK), FechaVenta)<br>
                            - Entidad <strong>Detalle_Venta</strong> (Tabla de cruce para M:N entre Venta y Producto, con ID_Venta_FK, ID_Producto_FK como PK compuesta)<br>
                            - L√≠neas conectando las cajas, con s√≠mbolos de "pata de gallo" (crow's foot) indicando cardinalidad (1:N, M:N).<br>
                            <em>Al pasar el mouse sobre una FK, se resaltar√≠a la PK a la que apunta en la otra tabla.</em>
                        </p>
                    </div>
                    <p>SDDM te permite ver claramente c√≥mo se conectan tus datos, identificar posibles problemas de dise√±o y generar la base de tu base de datos de manera eficiente.</p>
                    <div class="alert alert-success"><i class="fas fa-lightbulb"></i> Descarga e instala Oracle SQL Developer Data Modeler. ¬°Experimentar con la herramienta es la mejor forma de aprender!</div>
                </section>

                <section id="modulo16" class="module-section">
                    <h2 class="lesson-title"><i class="fas fa-scroll"></i> M√≥dulo 4: Creando tu Base de Datos con Scripts SQL</h2>
                    <p>Un script SQL es simplemente un archivo de texto que contiene una secuencia de comandos SQL. Son incre√≠blemente √∫tiles para:</p>
                    <ul>
                        <li><strong>Automatizar la creaci√≥n</strong> de la estructura de la base de datos (tablas, √≠ndices, restricciones, vistas, etc.).</li>
                        <li><strong>Poblar la base de datos</strong> con datos iniciales o de prueba.</li>
                        <li><strong>Realizar modificaciones</strong> consistentes en la estructura (ej: a√±adir una columna).</li>
                        <li><strong>Recrear la base de datos</strong> f√°cilmente en diferentes entornos (desarrollo, pruebas, producci√≥n).</li>
                        <li><strong>Control de versiones</strong> de tu esquema de base de datos.</li>
                    </ul>

                    <h3>üîπ Estructura de un Script de Creaci√≥n T√≠pico:</h3>
                    <p>Un buen script suele seguir un orden l√≥gico:</p>
                    <ol>
                        <li><strong>(Opcional) Comandos para limpiar/eliminar objetos existentes:</strong> Para que el script sea re-ejecutable (ej: <code>DROP TABLE nombre_tabla;</code>). En Oracle, esto puede ser m√°s complejo si hay dependencias de FK, a veces se requiere un orden espec√≠fico o deshabilitar constraints temporalmente.
                            <pre><code class="language-sql">-- Cuidado con DROP en producci√≥n! Usar con precauci√≥n.
-- BEGIN
--    EXECUTE IMMEDIATE 'DROP TABLE Detalle_Venta';
-- EXCEPTION
--    WHEN OTHERS THEN IF SQLCODE != -942 THEN RAISE; END IF; -- Ignora error "table does not exist"
-- END;
-- / 
-- (Repetir para Venta, Producto, Cliente en orden inverso de dependencias)
                            </code></pre>
                            <p><em>(El bloque PL/SQL anterior es una forma de manejar errores si la tabla no existe. En desarrollo, un simple <code>DROP TABLE ... CASCADE CONSTRAINTS;</code> puede ser m√°s directo si se conocen las implicaciones.)</em></p>
                        </li>
                        <li><strong>Creaci√≥n de Tablas (<code>CREATE TABLE</code>):</strong> Define la estructura y restricciones primarias.</li>
                        <li><strong>Creaci√≥n de Secuencias (<code>CREATE SEQUENCE</code>):</strong> (Com√∫n en Oracle para generar IDs √∫nicos si no se usan IDENTITY columns de Oracle 12c+).</li>
                        <li><strong>(Opcional) Modificaci√≥n de Tablas (<code>ALTER TABLE</code>):</strong> Para a√±adir restricciones de Clave For√°nea despu√©s de que todas las tablas referenciadas existan.</li>
                        <li><strong>Creaci√≥n de √çndices (<code>CREATE INDEX</code>).</strong></li>
                        <li><strong>Inserci√≥n de Datos (<code>INSERT INTO</code>).</strong></li>
                        <li><strong>Comandos <code>COMMIT;</code></strong> Para guardar permanentemente los cambios de DML (Data Manipulation Language como INSERT, UPDATE, DELETE).</li>
                        <li><strong>(Opcional) Creaci√≥n de Vistas, Procedimientos, Funciones, Triggers.</strong></li>
                        <li><strong>Consultas de Verificaci√≥n (<code>SELECT</code>).</strong></li>
                    </ol>

                    <h3>Ejemplo de Script SQL para la Tienda Online (Oracle):</h3>
                    <div class="interactive-zone">
                        <h4><i class="fas fa-play-circle"></i> Simulador de Ejecuci√≥n de Script SQL</h4>
                        <p>Observa el script y presiona "Ejecutar Siguiente" para ver (conceptualmente) c√≥mo se crea la base de datos paso a paso. Las tablas y datos aparecer√°n visualmente abajo.</p>
                        <pre id="sqlScriptContent" style="max-height: 300px; overflow-y: auto; background-color: #2d2d2d; color: #f0f0f0; padding: 10px; border-radius: 5px;"><code class="language-sql">
-- Borrado de tablas (simplificado para demo, en orden inverso de creaci√≥n y dependencias)
-- DROP TABLE Detalle_Venta;
-- DROP TABLE Venta;
-- DROP TABLE Producto;
-- DROP TABLE Cliente;
-- DROP SEQUENCE seq_cliente_id;
-- DROP SEQUENCE seq_producto_id;
-- DROP SEQUENCE seq_venta_id;
-- DROP SEQUENCE seq_detalle_id;

-- Creaci√≥n de Secuencias para IDs
CREATE SEQUENCE seq_cliente_id START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE seq_producto_id START WITH 100 INCREMENT BY 1;
CREATE SEQUENCE seq_venta_id START WITH 1000 INCREMENT BY 1;
CREATE SEQUENCE seq_detalle_id START WITH 5000 INCREMENT BY 1;

-- Tabla Cliente
CREATE TABLE Cliente (
    ID_Cliente      NUMBER(10) DEFAULT seq_cliente_id.NEXTVAL PRIMARY KEY,
    Nombre          VARCHAR2(50) NOT NULL,
    Apellido        VARCHAR2(50) NOT NULL,
    Email           VARCHAR2(100) UNIQUE,
    FechaRegistro   DATE DEFAULT SYSDATE
);

-- Tabla Producto
CREATE TABLE Producto (
    ID_Producto     NUMBER(10) DEFAULT seq_producto_id.NEXTVAL PRIMARY KEY,
    NombreProd      VARCHAR2(100) NOT NULL,
    PrecioUnit      NUMBER(10,2) NOT NULL CHECK (PrecioUnit > 0),
    StockDisp       NUMBER(6) DEFAULT 0 CHECK (StockDisp >= 0)
);

-- Tabla Venta
CREATE TABLE Venta (
    ID_Venta        NUMBER(12) DEFAULT seq_venta_id.NEXTVAL PRIMARY KEY,
    ID_Cliente_FK   NUMBER(10) NOT NULL,
    FechaVenta      TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    MontoTotal      NUMBER(12,2),
    CONSTRAINT fk_v_cliente FOREIGN KEY (ID_Cliente_FK) REFERENCES Cliente(ID_Cliente)
);

-- Tabla Detalle_Venta (para relaci√≥n M:N entre Venta y Producto)
CREATE TABLE Detalle_Venta (
    ID_DetalleVenta NUMBER(12) DEFAULT seq_detalle_id.NEXTVAL PRIMARY KEY,
    ID_Venta_FK     NUMBER(12) NOT NULL,
    ID_Producto_FK  NUMBER(10) NOT NULL,
    Cantidad        NUMBER(5) NOT NULL CHECK (Cantidad > 0),
    PrecioVenta     NUMBER(10,2) NOT NULL, -- Precio al momento de la venta
    CONSTRAINT fk_dv_venta FOREIGN KEY (ID_Venta_FK) REFERENCES Venta(ID_Venta),
    CONSTRAINT fk_dv_producto FOREIGN KEY (ID_Producto_FK) REFERENCES Producto(ID_Producto),
    CONSTRAINT uq_dv_venta_prod UNIQUE (ID_Venta_FK, ID_Producto_FK) -- Un producto solo una vez por venta
);

-- Insertar datos en Cliente
INSERT INTO Cliente (Nombre, Apellido, Email) VALUES ('Carlos', 'Santana', 'carlos.s@example.com');
INSERT INTO Cliente (Nombre, Apellido, Email) VALUES ('Laura', 'Pausini', 'laura.p@example.com');
COMMIT;

-- Insertar datos en Producto
INSERT INTO Producto (NombreProd, PrecioUnit, StockDisp) VALUES ('Guitarra El√©ctrica Pro', 799.99, 10);
INSERT INTO Producto (NombreProd, PrecioUnit, StockDisp) VALUES ('Micr√≥fono Condensador', 149.50, 25);
INSERT INTO Producto (NombreProd, PrecioUnit, StockDisp) VALUES ('Teclado MIDI 61 teclas', 220.00, 15);
COMMIT;

-- Simular una Venta (requerir√≠a l√≥gica para MontoTotal y Detalle_Venta)
-- Ejemplo: Carlos (ID_Cliente_FK ser√° 1 si es el primero) compra una guitarra
INSERT INTO Venta (ID_Cliente_FK, FechaVenta, MontoTotal) VALUES (
    (SELECT ID_Cliente FROM Cliente WHERE Email = 'carlos.s@example.com'), 
    TO_TIMESTAMP('2025-05-15 10:30:00', 'YYYY-MM-DD HH24:MI:SS'), 
    799.99
);
COMMIT;

-- Insertar detalle de esa venta
INSERT INTO Detalle_Venta (ID_Venta_FK, ID_Producto_FK, Cantidad, PrecioVenta) VALUES (
    (SELECT ID_Venta FROM Venta WHERE ID_Cliente_FK = (SELECT ID_Cliente FROM Cliente WHERE Email = 'carlos.s@example.com')), -- Asumiendo es la √∫ltima venta de Carlos
    (SELECT ID_Producto FROM Producto WHERE NombreProd = 'Guitarra El√©ctrica Pro'),
    1,
    799.99
);
COMMIT;

-- Consultar los datos
SELECT 'Clientes:' AS Tabla, COUNT(*) AS Registros FROM Cliente
UNION ALL
SELECT 'Productos:', COUNT(*) FROM Producto
UNION ALL
SELECT 'Ventas:', COUNT(*) FROM Venta
UNION ALL
SELECT 'Detalle Ventas:', COUNT(*) FROM Detalle_Venta;

SELECT c.Nombre, c.Apellido, p.NombreProd, dv.Cantidad, dv.PrecioVenta, v.FechaVenta
FROM Cliente c
JOIN Venta v ON c.ID_Cliente = v.ID_Cliente_FK
JOIN Detalle_Venta dv ON v.ID_Venta = dv.ID_Venta_FK
JOIN Producto p ON dv.ID_Producto_FK = p.ID_Producto;
                        </code></pre>
                        <button id="btnRunNextSql" class="btn btn-primary" style="margin-top:10px;"><i class="fas fa-step-forward"></i> Ejecutar Siguiente (Conceptual)</button>
                        <button id="btnResetSqlSim" class="btn btn-accent"><i class="fas fa-undo"></i> Reiniciar Simulaci√≥n</button>
                        
                        <h4>Salida/Visualizaci√≥n Conceptual:</h4>
                        <div id="sqlTableVizArea">
                            <p><em>Las tablas aparecer√°n aqu√≠ a medida que se ejecuten los <code>CREATE</code>...</em></p>
                            </div>
                        <div id="sqlOutputArea">
                            <p><em>Los resultados de los <code>SELECT</code> aparecer√°n aqu√≠...</em></p>
                        </div>
                    </div>
                    
                    <p><strong>Ejecuci√≥n del Script:</strong></p>
                    <ul>
                        <li><strong>En Oracle SQL Developer:</strong> Abre una nueva "Hoja de Trabajo SQL" (Worksheet), pega el contenido del script y presiona F5 (Ejecutar Script) o el bot√≥n correspondiente.</li>
                        <li><strong>En SQL*Plus (l√≠nea de comandos):</strong> Guarda el script en un archivo (ej: <code>crear_tienda.sql</code>), con√©ctate a tu base de datos y ejecuta <code>@ruta/a/tu/crear_tienda.sql</code>.</li>
                    </ul>
                    <p>Los scripts son tus aliados para construir y mantener tus bases de datos de forma ordenada y reproducible.</p>
                </section>
                <div class="lesson-navigation" style="margin-top:2rem;">
                    <a href="#modulo15" class="lesson-nav-button prev"><i class="fas fa-arrow-left"></i> M√≥dulo Anterior</a>
                    <span style="flex-grow:1; text-align:center; color: #777;">¬°Ahora puedes construir tus propias BD!</span>
                </div>
            </main>
        </div>
    </div>

    <footer style="margin-top: 4rem;">
        <div class="container footer-content">
             <div class="footer-logo">
                <a href="../../index.html" class="logo" style="font-size: 1.5rem; margin-bottom: 1rem;"><i class="fas fa-graduation-cap"></i> MoriDevEdu</a>
                <p>Empoderando a trav√©s del conocimiento de datos.</p>
                <div class="social-links">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="footer-links">
                <h4>Navegaci√≥n del Curso</h4>
                <ul>
                    <li><a href="#modulo0">Introducci√≥n</a></li>
                    <li><a href="#modulo13">Modelado Conceptual</a></li>
                    <li><a href="#modulo14">Modelo F√≠sico y SQL</a></li>
                    <li><a href="#modulo15">Data Modeler</a></li>
                    <li><a href="#modulo16">Scripts SQL</a></li>
                    <li><a href="../../index.html#cursos">Todos los Cursos</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Recursos Oracle</h4>
                <ul>
                    <li><a href="https://docs.oracle.com/en/database/oracle/oracle-database/" target="_blank">Documentaci√≥n Oracle DB</a></li>
                    <li><a href="https://livesql.oracle.com/" target="_blank">Oracle Live SQL</a></li>
                </ul>
            </div>
        </div>
        <div class="container footer-bottom">
            <p>&copy; <span id="currentYearDb"></span> MoriDevEdu. Todos los derechos reservados.</p>
             <p>Una iniciativa de <a href="https://diegomori.online" target="_blank" rel="noopener noreferrer" style="color: var(--accent-color); text-decoration: none;">diegomori.online</a> - MoriDev con apoyo de MoriCarp.</p>
        </div>
    </footer>

    <script>
        // Men√∫ m√≥vil
        const mobileMenuToggleDb = document.querySelector('.mobile-menu');
        const navLinksDb = document.querySelector('.nav-links');
        if (mobileMenuToggleDb && navLinksDb) {
            mobileMenuToggleDb.addEventListener('click', () => {
                navLinksDb.classList.toggle('active');
                const icon = mobileMenuToggleDb.querySelector('i');
                icon.classList.toggle('fa-bars');
                icon.classList.toggle('fa-times');
            });
        }
        document.getElementById('currentYearDb').textContent = new Date().getFullYear();

        // Navegaci√≥n activa y smooth scroll para men√∫ del curso
        const courseNavLinksDb = document.querySelectorAll('.course-nav-link');
        const moduleSectionsDb = document.querySelectorAll('.module-section');
        let observerDb;
        function makeLinkActiveDb(link) {
            courseNavLinksDb.forEach(l => l.classList.remove('active'));
            if (link) link.classList.add('active');
        }
        function onIntersectionDb(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const link = document.querySelector(`.course-nav-link[href="#${entry.target.id}"]`);
                    makeLinkActiveDb(link);
                }
            });
        }
        if (moduleSectionsDb.length > 0) {
            observerDb = new IntersectionObserver(onIntersectionDb, { rootMargin: "-30% 0px -60% 0px", threshold: 0.01 });
            moduleSectionsDb.forEach(section => observerDb.observe(section));
        }
        courseNavLinksDb.forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    makeLinkActiveDb(this);
                    const offsetTop = targetElement.offsetTop - 60;
                    window.scrollTo({ top: offsetTop, behavior: 'smooth' });
                }
            });
        });
        // Activar primer link o link del hash
        if(courseNavLinksDb.length > 0) {
            const currentHash = window.location.hash;
            let linkToActivate = courseNavLinksDb[0]; // Por defecto el primero
            if (currentHash) {
                const hashedLink = document.querySelector(`.course-nav-link[href="${currentHash}"]`);
                if (hashedLink) {
                    linkToActivate = hashedLink;
                }
            }
            makeLinkActiveDb(linkToActivate);
        }
        

        // Toggle para explicaciones conceptuales
        function toggleExplanation(id) {
            const el = document.getElementById(id);
            if (el) {
                el.style.display = el.style.display === 'block' ? 'none' : 'block';
            }
        }

        // --- Simulaci√≥n de SQL Script Runner ---
        const btnRunNextSql = document.getElementById('btnRunNextSql');
        const btnResetSqlSim = document.getElementById('btnResetSqlSim');
        const sqlScriptContentEl = document.getElementById('sqlScriptContent');
        const sqlOutputArea = document.getElementById('sqlOutputArea');
        const sqlTableVizArea = document.getElementById('sqlTableVizArea');
        
        let originalSqlScript = "";
        let sqlCommands = [];
        let currentSqlCmdIndex = 0;
        let createdTablesViz = {}; // Para simular tablas creadas

        function initializeSqlSim() {
            if (!sqlScriptContentEl) return;
            originalSqlScript = sqlScriptContentEl.querySelector('code').textContent;
            resetSqlSimulation();
        }

        function resetSqlSimulation() {
            currentSqlCmdIndex = 0;
            // Separar por ; pero manejando los que est√°n dentro de comentarios o strings (simplificado)
            // Para una simulaci√≥n real, se necesitar√≠a un parser SQL m√°s robusto.
            // Esta simplificaci√≥n puede fallar con SQL complejo.
            sqlCommands = originalSqlScript.split(';').map(cmd => cmd.trim()).filter(cmd => cmd.length > 0 && !cmd.startsWith('--'));
            sqlOutputArea.innerHTML = "<p><em>Los resultados de los <code>SELECT</code> aparecer√°n aqu√≠...</em></p>";
            sqlTableVizArea.innerHTML = "<p><em>Las tablas aparecer√°n aqu√≠ a medida que se ejecuten los <code>CREATE</code>...</em></p>";
            createdTablesViz = {};
            highlightNextCommand();
        }

        function highlightNextCommand() {
            if (!sqlScriptContentEl) return;
            let tempScript = originalSqlScript;
            let executedLength = 0;
            for(let i = 0; i < currentSqlCmdIndex; i++) {
                executedLength += sqlCommands[i].length + 1; // +1 por el ;
            }
            if (currentSqlCmdIndex < sqlCommands.length) {
                const nextCmd = sqlCommands[currentSqlCmdIndex];
                const startIndex = tempScript.indexOf(nextCmd, executedLength); // Buscar despu√©s de lo ya ejecutado
                if (startIndex !== -1) {
                     tempScript = tempScript.substring(0, startIndex) +
                                 '<mark style="background-color:yellow; color:black;">' + nextCmd + '</mark>' +
                                 tempScript.substring(startIndex + nextCmd.length);
                }
            }
            sqlScriptContentEl.querySelector('code').innerHTML = tempScript;
        }
        
        function simulateSqlCommand(command) {
            command = command.toUpperCase(); // SQL es case-insensitive para keywords
            if (command.startsWith('CREATE TABLE')) {
                const tableNameMatch = command.match(/CREATE TABLE\s+(\w+)/);
                if (tableNameMatch) {
                    const tableName = tableNameMatch[1];
                    createdTablesViz[tableName] = []; // Simula tabla vac√≠a
                    sqlTableVizArea.innerHTML += `<p>‚úÖ Tabla '<strong>${tableName}</strong>' creada (simulado).</p>`;
                    // Simplificado: no parseamos columnas aqu√≠
                }
            } else if (command.startsWith('INSERT INTO')) {
                const tableNameMatch = command.match(/INSERT INTO\s+(\w+)/);
                if (tableNameMatch) {
                    const tableName = tableNameMatch[1];
                    if (createdTablesViz[tableName]) {
                        // Simular a√±adir una fila. Para una visualizaci√≥n real, necesitar√≠amos parsear VALUES
                        createdTablesViz[tableName].push({simulatedData: 'Nueva Fila'}); 
                        sqlOutputArea.innerHTML += `<p>‚û°Ô∏è Fila insertada en '<strong>${tableName}</strong>' (simulado).</p>`;
                        updateTableVisual(tableName);
                    } else {
                         sqlOutputArea.innerHTML += `<p>‚ö†Ô∏è Tabla '<strong>${tableName}</strong>' no existe para INSERT (simulado).</p>`;
                    }
                }
            } else if (command.startsWith('SELECT')) {
                // Simulaci√≥n muy b√°sica de SELECT
                let output = `üîç Resultado de: ${command.substring(0,60)}...\n`;
                Object.keys(createdTablesViz).forEach(tableName => {
                    if (command.includes(tableName)) { // Si el SELECT menciona la tabla
                        output += `  Tabla ${tableName}: ${createdTablesViz[tableName].length} fila(s) (simulado).\n`;
                    }
                });
                sqlOutputArea.innerHTML += `<pre>${output}</pre>`;
            } else if (command.startsWith('COMMIT')) {
                 sqlOutputArea.innerHTML += `<p>üíæ COMMIT ejecutado (cambios guardados, simulado).</p>`;
            } else if (command.startsWith('CREATE SEQUENCE')) {
                const seqNameMatch = command.match(/CREATE SEQUENCE\s+(\w+)/);
                if (seqNameMatch) {
                    sqlOutputArea.innerHTML += `<p>üåÄ Secuencia '<strong>${seqNameMatch[1]}</strong>' creada (simulado).</p>`;
                }
            }
            // A√±adir m√°s simulaciones para DROP, etc. si se desea
        }

        function updateTableVisual(tableName) {
            // Esta funci√≥n podr√≠a actualizar una representaci√≥n visual de la tabla en sqlTableVizArea
            // Por ahora, solo contamos filas.
            const tableInfo = sqlTableVizArea.querySelector(`#viz-${tableName}`);
            if (tableInfo) {
                tableInfo.textContent = `Tabla ${tableName}: ${createdTablesViz[tableName].length} fila(s)`;
            } else {
                sqlTableVizArea.innerHTML += `<div id="viz-${tableName}">Tabla ${tableName}: ${createdTablesViz[tableName].length} fila(s)</div>`;
            }
        }

        if (btnRunNextSql) {
            btnRunNextSql.addEventListener('click', () => {
                if (currentSqlCmdIndex < sqlCommands.length) {
                    const commandToRun = sqlCommands[currentSqlCmdIndex];
                    simulateSqlCommand(commandToRun);
                    currentSqlCmdIndex++;
                    highlightNextCommand();
                    if (currentSqlCmdIndex >= sqlCommands.length) {
                        sqlOutputArea.innerHTML += "<p>üèÅ Fin del script (simulado).</p>";
                    }
                } else {
                     sqlOutputArea.innerHTML += "<p>üèÅ Script ya finalizado. Reinicia la simulaci√≥n.</p>";
                }
            });
        }
        if (btnResetSqlSim) {
            btnResetSqlSim.addEventListener('click', resetSqlSimulation);
        }
        
        // Inicializar simulador al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', initializeSqlSim);

    </script>
</body>
</html>